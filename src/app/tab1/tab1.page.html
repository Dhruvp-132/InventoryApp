<ion-header [translucent]="true">
  <ion-toolbar color="primary">
    <ion-title>Inventory List</ion-title>
    <ion-buttons slot="end">
      <ion-button (click)="showHelp()">
        <ion-icon slot="icon-only" name="help-circle-outline"></ion-icon>
      </ion-button>
    </ion-buttons>
  </ion-toolbar>
</ion-header>

<ion-content [fullscreen]="true">
  <ion-header collapse="condense">
    <ion-toolbar>
      <ion-title size="large">Inventory List</ion-title>
    </ion-toolbar>
  </ion-header>

  <!-- Search Section -->
  <ion-card>
    <ion-card-header>
      <ion-card-title>Search Item</ion-card-title>
    </ion-card-header>
    <ion-card-content>
      <ion-item>
        <ion-label position="floating">Item Name</ion-label>
        <ion-input 
          type="text" 
          [(ngModel)]="searchName" 
          placeholder="Enter item name">
        </ion-input>
      </ion-item>
      <ion-button 
        expand="block" 
        (click)="searchItem()" 
        [disabled]="!searchName"
        class="ion-margin-top">
        <ion-icon slot="start" name="search-outline"></ion-icon>
        Search
      </ion-button>
      <ion-button 
        expand="block" 
        fill="outline" 
        (click)="clearSearch()" 
        class="ion-margin-top"
        *ngIf="searchName">
        Clear
      </ion-button>
    </ion-card-content>
  </ion-card>

  <!-- Search Result -->
  <ion-card *ngIf="searchedItem">
    <ion-card-header>
      <ion-card-title>{{ searchedItem.itemName }}</ion-card-title>
    </ion-card-header>
    <ion-card-content>
      <ion-list>
        <ion-item>
          <ion-label>
            <h3>ID</h3>
            <p>{{ searchedItem.itemId }}</p>
          </ion-label>
        </ion-item>
        <ion-item>
          <ion-label>
            <h3>Category</h3>
            <p>{{ searchedItem.category }}</p>
          </ion-label>
        </ion-item>
        <ion-item>
          <ion-label>
            <h3>Quantity</h3>
            <p>{{ searchedItem.quantity }}</p>
          </ion-label>
        </ion-item>
        <ion-item>
          <ion-label>
            <h3>Price</h3>
            <p>${{ searchedItem.price }}</p>
          </ion-label>
        </ion-item>
        <ion-item>
          <ion-label>
            <h3>Supplier</h3>
            <p>{{ searchedItem.supplierName }}</p>
          </ion-label>
        </ion-item>
        <ion-item>
          <ion-label>
            <h3>Status</h3>
            <p>
              <ion-badge [color]="getStockStatusColor(searchedItem.stockStatus)">
                {{ searchedItem.stockStatus }}
              </ion-badge>
            </p>
          </ion-label>
        </ion-item>
      </ion-list>
    </ion-card-content>
  </ion-card>

  <!-- All Items List -->
  <ion-card>
    <ion-card-header>
      <ion-card-title>All Items ({{ items.length }})</ion-card-title>
    </ion-card-header>
    <ion-card-content>
      <div *ngIf="isLoading" class="ion-text-center ion-padding">
        <ion-spinner name="crescent"></ion-spinner>
        <p>Loading...</p>
      </div>

      <div *ngIf="!isLoading && items.length === 0" class="ion-text-center ion-padding">
        <p>No items found</p>
      </div>

      <ion-list *ngIf="!isLoading && items.length > 0">
        <ion-item *ngFor="let item of items">
          <ion-label>
            <h2>{{ item.itemName }}</h2>
            <h3>{{ item.category }}</h3>
            <p>Qty: {{ item.quantity }} | Price: ${{ item.price }}</p>
          </ion-label>
          <ion-badge 
            slot="end" 
            [color]="getStockStatusColor(item.stockStatus)">
            {{ item.stockStatus }}
          </ion-badge>
        </ion-item>
      </ion-list>

      <ion-button 
        expand="block" 
        fill="outline" 
        (click)="loadAllItems()" 
        class="ion-margin-top"
        *ngIf="!isLoading">
        Refresh
      </ion-button>
    </ion-card-content>
  </ion-card>

</ion-content>